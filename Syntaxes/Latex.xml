<?xml version="1.0"?>
<syntax name="text.latex">
	<zones>
		<include collection="text.latex" />
	</zones>

	<library>
		<collection name="text.latex">
			<zone name="metadata.comment.multiline">
				<starts-with>\\begin{comment}</starts-with>
				<ends-with>\\end{comment}</ends-with>
			</zone>
			<zone name="latex.section">
				<!--<expression>^(\\)(section|chapter)\*?({)(.+)(})</expression>-->
				<starts-with>
				    <expression>^(\\)(section|chapter)\*?({)([^}]+)(})</expression>
					<capture number="1" name="delimiter" />
					<capture number="2" name="identifier.function" />
					<capture number="3" name="delimiter" />
					<capture number="4" name="structural.header.section" />
					<capture number="5" name="delimiter" />
				</starts-with>
				<ends-with>
				    <expression>(?=^\\(?:section|chapter)\*?{[^}]+})</expression>
				</ends-with>
				<subzones>
				    <include collection="text.latex"/>
				</subzones>
			</zone>
			<zone name="latex.sub">
				<starts-with>
					<expression>^(\\)(subsection|part|subparagraph)\*?({)([^}]+)(})</expression>
					<capture number="1" name="delimiter" />
					<capture number="2" name="identifier.function" />
					<capture number="3" name="delimiter" />
					<capture number="4" name="structural.header.sub" />
					<capture number="5" name="delimiter" />
				</starts-with>
				<ends-with>
					<expression>(?=^\\(?:section|chapter|subsection|part|subparagraph)\*?{[^}]+})</expression>
				</ends-with>
				<subzones>
				    <include collection="text.latex"/>
				</subzones>
			</zone>
			<zone name="latex.subsub">
				<starts-with>
					<expression>^(\\)(subsubsection)\*?({)([^}]+)(})</expression>
					<capture number="1" name="delimiter" />
					<capture number="2" name="identifier.function" />
					<capture number="3" name="delimiter" />
					<capture number="4" name="structural.header.subsub" />
					<capture number="5" name="delimiter" />
				</starts-with>
				<ends-with>
					<expression>(?=^\\(?:section|chapter|subsection|part|subparagraph|subsubsection)\*?{[^}]+})</expression>
				</ends-with>
				<subzones>
				    <include collection="text.latex"/>
				</subzones>
			</zone>
			<zone name="latex.bold">
				<expression>(\\)(textbf|emph|textsc)({)([^}]+)(})</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
				<capture number="3" name="delimiter" />
				<capture number="4" name="structural.context.emphasis" />
				<capture number="5" name="delimiter" />
				<capture number="6" name="metadata.processing" />
			</zone>
			<zone name="latex.input">
				<expression>^(\\)(input)({)(.+)(})</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
				<capture number="3" name="delimiter" />
				<capture number="4" name="structural.header.input" />
				<capture number="5" name="delimiter" />
			</zone>
			<zone name="latex.paragraph">
				<expression>^(\\)(paragraph)\*?({)([^}]+)(})</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
				<capture number="3" name="delimiter" />
				<capture number="4" name="structural.header.paragraph" />
				<capture number="5" name="delimiter" />
			</zone>
			<zone name="latex.appendix">
				<expression>^(\\)(appendix)</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
			</zone>
			<zone name="latex.function">
				<expression>(\\)([a-zA-Z]+)({)([^}]+)(})(\[[^\]]+\])?</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
				<capture number="3" name="delimiter" />
				<capture number="4" name="structural.context" />
				<capture number="5" name="delimiter" />
				<capture number="6" name="metadata.processing" />
			</zone>
			<zone name="latex.function.prearg">
				<expression>(\\)([a-zA-Z]+)(\[[^\]]+\])({)([^}]+)(})</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
				<capture number="3" name="metadata.processing" />
				<capture number="4" name="delimiter" />
				<capture number="5" name="structural.context" />
				<capture number="6" name="delimiter" />
			</zone>
			<zone name="metadata.comment">
				<expression>\%.*</expression>
			</zone>
			<zone name="latex.function.noargs">
				<expression>(\\)([a-zA-Z]+)</expression>
				<capture number="1" name="delimiter" />
				<capture number="2" name="identifier.function" />
			</zone>
			<zone name="delimiter.newline">
				<expression>\\\\</expression>
			</zone>
		</collection>
	</library>
</syntax>